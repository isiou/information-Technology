# 浏览器事件

## BOM(Browser Object Model)

BOM 是浏览器对象模型。

window 对象是一个全局对象，也可以说是 JavaScript 中的**顶级对象**，像 document alert console 这些都是 window 的属性，基本 BOM 的属性和方法都是 window 的。

所有通过 var 定义在全局作用域中的变量、函数都会变成 window 对象的属性和方法。大部分情况下 window 可以省略。

## 延时函数（定时器）

JavaScript 内置的一个用来让代码延迟执行的函数。

```js
setTimeout(回调函数, 等待的毫秒数);
```

setTimeout 仅仅执行一次，可以理解为把一段代码延迟执行，可以省略 window

清除延迟函数：

```js
// 方法返回新的延时器
let timer = setTimeout(回调函数, 等待的毫秒数);
// 清除
clearTimeout(timer);
```

## JavaScript 执行机制

JavaScript 语言的一大特点就是**单线程**，简言之就是**同一时间只能做一件事**。

JavaScript 诞生即是为了处理页面中的用户交互，以及操作 DOM 元素。但是当我们对某个 DOM 元素进行添加或者删除操作的时候，是不能同时进行的。

单线程意味着所有任务需要排队，只有当前一个任务结束后才会进行下一个任务。这样导致的问题有：若页面内容很多，而 JavaScript 执行的时间过长，会导致页面的渲染不连贯，即页面渲染加载阻塞。

为了解决这个问题，利用多核处理器的计算能力，HTML5 提出 Web Worker 标准，允许 JavaScript 创建多个线程。

于是 JavaScript 中出现了**同步**与**异步**。

### 同步

前一个任务执行结束后执行下一个任务，程序的执行顺序与任务的排列顺序一致。

同步任务都在主线程上进行，形成一个**执行栈**。

### 异步

一件任务执行时，同时执行其他的任务。

JavaScript 的异步通过回调函数实现。

常见三种类型：

1. 普通事件，如 click resize 等

2. 资源加载，如 load error 等

3. 定时器，如 setInterval setTimeout 等

异步任务添加到**任务队列**中。

### 事件循环 (event loop)

1. 先执行**执行栈**中的同步任务

2. 异步任务放入任务队列中

3. 一旦执行栈中的所有同步任务执行完毕，系统就会按次序读取**任务队列**中的异步任务，于是被读取的异步任务结束等待状态，进入执行栈，开始执行

## location 对象

location 的数据类型是对象，它拆分保存 URL 地址的各个组成部分。

常用属性和方法：

1. href 属性获取完整的 URL 地址，对其赋值可进行地址的跳转

2. search 属性获取地址中携带的参数，符号 ? 后面部分

3. hash 属性获取地址中的哈希值，符号 # 后面部分

4. reload() 方法用来刷新当前页面，传入参数为 true 时表示强制刷新

## navigator 对象

navigator 对象获取浏览器的相关信息。

常用属性和方法：

userAgent 检测浏览器的版本及运行平台。

## histroy 对象

histroy 对象主要管理历史记录，该对象与浏览器地址栏的操作相对应，如前进、后退、历史记录等。

常用属性和方法：

1. back() 后退功能

2. forward() 前进功能

3. go() 前进后退功能，参数为 1 前进一个页面，参数为 -2 后退两个页面。
